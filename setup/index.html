<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>Setup - Django Signal Webhooks</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../css/docs.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Setup";
        var mkdocs_page_input_path = "setup.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/console.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/json.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Django Signal Webhooks
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Setup</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-add-app-to-installed_apps">① Add app to INSTALLED_APPS</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#2-run-migrations">② Run migrations</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#3-define-webhook-settings">③ Define webhook settings</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#4-add-hooks-in-the-admin-panel">④ Add hooks in the admin panel</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#5-thats-it">⑤ That's it!</a>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Django Signal Webhooks</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Setup</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="setup">Setup</h1>
<h2 id="1-add-app-to-installed_apps">① Add app to <code>INSTALLED_APPS</code></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># project/settings.py</span>

<span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">[</span>
    <span class="o">...</span>
    <span class="s2">&quot;signal_webhooks&quot;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">]</span>
</code></pre></div>
<h2 id="2-run-migrations">② Run migrations</h2>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>manage.py<span class="w"> </span>migrate
</code></pre></div>
<p>You should now see the webhooks section in django's admin panel.</p>
<h2 id="3-define-webhook-settings">③ Define webhook settings</h2>
<p>The easiest way to add webhooks is just to use the default
configuration by settings ... (ellipses) to a model in the
HOOKS configuration option.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># project/settings.py</span>

<span class="n">SIGNAL_WEBHOOKS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;HOOKS&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="c1"># Add default webhook configuration to the User model</span>
        <span class="s2">&quot;django.contrib.auth.models.User&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<p>This will allow webhooks to be fired for the User model.
You can also set the value to a string in dot import notation,
pointing to a custom function, or to None to explicitly forbid
hooks for a given model. You can also set these for each signal
separately.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># project/settings.py</span>

<span class="n">SIGNAL_WEBHOOKS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;HOOKS&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;django.contrib.auth.models.User&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;CREATE&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;UPDATE&quot;</span><span class="p">:</span> <span class="s2">&quot;my.custom.func&quot;</span><span class="p">,</span>
            <span class="s2">&quot;DELETE&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
            <span class="c1"># Many to many post signals</span>
            <span class="s2">&quot;M2M_ADD&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
            <span class="s2">&quot;M2M_REMOVE&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
            <span class="s2">&quot;M2M_CLEAR&quot;</span><span class="p">:</span> <span class="o">...</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="4-add-hooks-in-the-admin-panel">④ Add hooks in the admin panel</h2>
<p>You must give each webhook a unique name, the signals it listens to,
the references model (in dot import notation), and the endpoint
it will call. You can also set any headers you want, as well as
an authentication token that will be used in the Authorization
header in the webhook. This token will be ciphered using
<code>SIGNAL_WEBHOOKS.CIPHER_KEY</code> when saved to the database to
prevent it from being stolen. Ticking the <code>keep_last_reponse</code>
checkbox will allow webhook responses to be recorded in the
<code>last_reponse</code> field.</p>
<p><img alt="Webhooks in admin panel" src="https://raw.githubusercontent.com/MrThearMan/django-signal-webhooks/main/docs/img/admin_panel.png" /></p>
<h2 id="5-thats-it">⑤ That's it!</h2>
<p>Webhooks should now be fired for the defined signals. Here is an
example of what the default configuration will send for the User
model.</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;auth.user&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;pk&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;fields&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;password&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pbkdf2_sha256$390000$79U11eoHYvz4v33cXo5373$bNN8Q0NpvOowd1od9pBUNG1WJ4zUIz4eOlaSOQNbop8=&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;last_login&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;is_superuser&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;username&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;foo&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;first_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;last_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;email&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;is_staff&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;is_active&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;date_joined&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2022-08-21 20:37:38.714905+00:00&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;groups&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">&quot;user_permissions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>You can set different data for these requests in various ways,
like with <code>SIGNAL_WEBHOOKS.SERIALIZER</code> setting, or on per-model
basis by defining a <code>webhook_data</code> method on the model.
Have a look at the available <a href="https://github.com/MrThearMan/django-signal-webhooks/blob/main/signal_webhooks/settings.py">settings</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
